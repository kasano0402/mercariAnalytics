<!--レイアウトの呼び出し-->
{% extends "layout.html" %}

<!-- 個別のhtml -->
{% block content %}
<!-- 個別css読み込み -->
<link href="/static/css/result.css" rel="stylesheet" media="screen" />
<!-- navbar -->
<nav class="navbar navbar-default">
  <a href="/"><img class="logo" src="\static\picture\logo.png" alt="logo"/></a>
</nav>
<!--コンテナ -->
<div class="container">
  {% if sold_itemlist|length > 120 %}
  <p class="container-notes">直近{{sold_itemlist|length}}件の売り切れ商品</p>
  {% else %}
  <p class="container-notes">{{sold_itemlist|length}}件の売り切れ商品</p>
  {% endif %}
  <p class="container-title"><strong>{{keyword}}</strong>の分析結果</p>
  <!--グラフエリア-->
  {% block graph %} {% endblock %}
  <!--結果リストのヘッダー部分-->
  <div class="result-header">
    <p>購入率の高い価格帯： &yen3,000 ～ [[仮置き]]</p>
  </div>
  <!--結果リスト-->
  <div class="resul-list">
    <div class="row">
      {% for name, price, status, url, photo in sold_itemlist %}
      <div class="item">
        <a href="{{url}}" target="_blank">
          <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 col-xl-2">
            <img style="background-image: url({{photo}});" />
            <span class="itemprice">{{price}}</span>
            <span class="itemname">{{name}}</span>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
  <script>
    function addFigure (str) {
      var num = new String(str).replace(/,/g, '')
      while (num != (num = num.replace(/^(-?\d+)(\d{3})/, '$1,$2')));
      var str = '&yen' + num
      return str
    }
    $(function () {
      $('.itemprice').each(function () {
        $(this).html(addFigure($(this).html()))
      })
    })
  </script>
  {% endblock %}
</div>
